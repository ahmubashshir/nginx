<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.min.css" crossorigin="anonymous">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js" crossorigin="anonymous"></script>
  <script type="application/javascript" src="https://unpkg.com/showdown/dist/showdown.min.js" crossorigin="anonymous"></script>
  <!--link rel="stylesheet" href="/static/retro.css"-->
  <link rel="stylesheet" href="/static/css/theme-selector.css">
  <link id="style-selector" rel="stylesheet" href="https://jasonm23.github.io/markdown-css-themes/markdown9.css">
  <script async>
	  var themestyle = 'style-selector';
	  var themes = {
		"dark": "https://jasonm23.github.io/markdown-css-themes/markdown9.css",
		"light": "https://jasonm23.github.io/markdown-css-themes/markdown10.css"
	  };
  </script>
  <script defer type="text/javascript" src="/static/js/theme-selector.js"></script>
  <style rel="stylesheet">code.error {line-height:2rem;font-size:2rem;color:#F43;padding:2rem;display: block;}</style>
  <script>
    const FILENAME = location.pathname;
    var converter = new showdown.Converter({
            ghCompatibleHeaderId:	true,
            parseImgDimensions:		true,
            strikethrough:			true,
            tables:					true,
            tablesHeaderId:			true,
            tasklists:				true,
            smartIndentationFix:	true,
            simpleLineBreaks:		true,
            backslashEscapesHTMLTags:true,
            emoji:					true,
            metadata:				true
    });
    const set = (t) => document.getElementById('content').innerHTML = t;
    const pull = fetch(FILENAME, {headers: {'Accept': 'text/markdown'}})
      .then((res) => {
        if (!res.ok)
          throw new Error(`${res.statusText} (${res.status})`);

        return res.text()
      })
      console.log(JSON. stringify(document.all));
  </script>
  <script defer>
    pull.then((text) => set(DOMPurify.sanitize(converter.makeHtml(text))))
      .catch((err) => DOMPurify.sanitize(set(`<code class="error">Failed to load ${FILENAME}: ${err.message}</code>`)))
  </script>
</head>
<body>
		<label id="switch" class="switch">
			<input type="checkbox" onchange="toggleTheme()" id="slider">
			<span class="slider round"></span>
		</label>
	<div class="container box" style="margin:5rem auto;padding:4rem">
	  <div id="content"></div>
	</div>

</body>
</html>
